<!-- src/main/resources/templates/mail/summary.html -->
<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8" />
    <title th:text="${subject}">ì›”ìš”ì¼ AI ì†Œì‹</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
        /* ê¸°ì¡´ ìŠ¤íƒ€ì¼ ìœ ì§€ + ë²ˆí˜¸ ë±ƒì§€/í”Œë ˆì´ìŠ¤í™€ë”ë§Œ ì¶”ê°€ */
        body { display:flex; align-items:center; background:none; font-family:'Pretendard','sans-serif'; margin:0; padding:0; min-height:100vh; }
        .container { border-radius:6px; width:540px; padding:0 30px 40px; margin:0 auto; background:#f7f7fb; position:relative; z-index:0; }
        .header { padding:20px 0 16px 0; }
        .to { margin-left:8px; color:#111; font-size:20px; font-weight:700; line-height:120%; }
        .main-title { color:#111; font-size:32px; font-weight:700; line-height:120%; margin:16px 0 20px; }
        .menu-bar { color:#111; font-size:14px; font-weight:500; line-height:120%; display:flex; justify-content:flex-end; align-items:center; gap:8px; }
        .menu-bar > a { color:#111; text-decoration:none; padding:10px; }
        .intro-box { background:#fff; border-radius:14px; padding:12px 20px; color:#111; font-size:16px; line-height:160%; border:1px solid #dfdfdf; }
        .section-title { color:#9112BC; font-size:22px; font-weight:700; line-height:120%; margin:40px 0 12px 8px; }

        .card-list { display:flex; flex-direction:column; gap:4px; }
        .card { position:relative; display:flex; padding:19px 20px 34px; flex-direction:column; gap:10px; border-radius:10px; border:1px solid #DFDFDF; background:#FFF; }
        .card strong { color:#111; font-size:18px; font-weight:700; line-height:120%; padding-left:28px; }
        .card ul { color:#111; font-size:16px; line-height:160%; margin:0; padding-left:20px; }
        .card p { color:#111; font-size:16px; line-height:160%; margin:0; }
        .card a.view { position:absolute; right:20px; bottom:10px; color:#111; font-size:12px; text-decoration:underline; }
        .card span.view-disabled { position:absolute; right:20px; bottom:10px; color:#666; font-size:12px; opacity:.6; }

        /* ë²ˆí˜¸ ë±ƒì§€ */
        .num-badge {
            position:absolute; left:14px; top:14px;
            width:20px; height:20px; border-radius:50%;
            display:flex; align-items:center; justify-content:center;
            font-size:12px; font-weight:700; color:#fff; background:#9112BC;
        }

        /* í”Œë ˆì´ìŠ¤í™€ë”(ë¹„ì–´ìˆì„ ë•Œ) */
        .placeholder { color:#6b7280; }
    </style>
</head>
<body>
<div class="container">
    <div class="header">
        <div class="to">To. <span th:text="${toName != null ? toName : 'â—‹â—‹'}">â—‹â—‹</span>ë‹˜</div>
        <div class="main-title" th:text="${mainTitle != null ? mainTitle : subject}">ì›”ìš”ì¼ AI ì†Œì‹ì´ ë„ì°©í–ˆì–´ìš”</div>
        <div class="menu-bar">
            <a th:href="${prevUrl != null ? prevUrl : '#'}">ì´ì „ ê¸°ì‚¬ ë³´ê¸°</a>
            <span>|</span>
            <a th:href="${webUrl != null ? webUrl : '#'}">ì›¹ìœ¼ë¡œ ë³´ê¸°</a>
        </div>
        <div class="intro-box"
             th:utext="${introHtml != null ? introHtml : (summary != null ? summary : 'ì˜¤ëŠ˜ AI ì†Œì‹ì´ ì´ë ‡ê²Œ ë°”ë€Œì—ˆì–´ìš”...')}">
            ì˜¤ëŠ˜ AI ì†Œì‹ì´ ì´ë ‡ê²Œ ë°”ë€Œì—ˆì–´ìš”. ì•ˆ ë³´ë©´ ì§„ì§œ ì†í•´!<br>ê¶ê¸ˆí•˜ì§€ ì•Šë‚˜ìš”? ğŸ˜† ë„ˆë§Œ ì•ˆ ë³´ë©´ ë‚˜ ìŠ¬í¼ìš”...
        </div>
    </div>

    <div class="section-title">ì˜¤ëŠ˜ì˜ íŠ¸ë Œë“œ</div>

    <div class="card-list">
        <!-- í•­ìƒ 1..5ê¹Œì§€ ê³ ì • ì¶œë ¥. cardsê°€ ë¶€ì¡±í•˜ë©´ í”Œë ˆì´ìŠ¤í™€ë”ë¡œ ì±„ì›€ -->
        <div class="card"
             th:each="i : ${#numbers.sequence(1,5)}"
             th:with="c=${(cards != null and cards.size() >= i) ? cards[i-1] : null}">
            <!-- ë²ˆí˜¸ ë±ƒì§€ -->
            <div class="num-badge" th:text="${i}">1</div>

            <!-- ì œëª© -->
            <strong th:text="${c != null && c.title != null && !#strings.isEmpty(c.title)
                               ? c.title : 'ì œëª© ì¤€ë¹„ì¤‘'}"
                    th:classappend="${c == null || #strings.isEmpty(c?.title)} ? ' placeholder' : ''">
                ì¹´ë“œ ì œëª©
            </strong>

            <!-- bullets ìš°ì„  -->
            <ul th:if="${c != null && c.bullets != null && !#lists.isEmpty(c.bullets)}">
                <li th:each="b : ${c.bullets}" th:text="${b}">ë¶ˆë¦¿</li>
            </ul>

            <!-- bullets ì—†ìœ¼ë©´ desc -->
            <p th:if="${!(c != null && c.bullets != null && !#lists.isEmpty(c.bullets))}"
               th:text="${c != null && c.desc != null && !#strings.isEmpty(c.desc) ? c.desc : 'ìš”ì•½ ì¤€ë¹„ì¤‘'}"
               th:classappend="${c == null || #strings.isEmpty(c?.desc)} ? ' placeholder' : ''">
                ê°„ë‹¨ ìš”ì•½
            </p>

            <!-- ë§í¬: ìˆìœ¼ë©´ a, ì—†ìœ¼ë©´ ë¹„í™œì„± span -->
            <a class="view"
               th:if="${c != null && c.link != null && !#strings.isEmpty(c.link)}"
               th:href="${c.link}" target="_blank">ì›ë¬¸ ë³´ëŸ¬ ê°€ê¸°</a>
            <span class="view-disabled"
                  th:if="${c == null || c.link == null || #strings.isEmpty(c.link)}">ë§í¬ ì¤€ë¹„ì¤‘</span>
        </div>
    </div>

    <!-- ìš©ì–´ë°•ìŠ¤: í•„ìš” ì‹œ words ì „ë‹¬í•˜ë©´ ë‚˜ì˜´ -->
    <div class="mini-section-title" th:if="${words}">ì´ ë‹¨ì–´ê°€ ì–´ë µë‚˜ìš”?</div>
    <ul class="word-list" th:if="${words}">
        <li th:each="w : ${words}">
            <b th:text="${w.term}">ìš©ì–´</b>: <span th:text="${w.desc}">ì„¤ëª…</span>
        </li>
    </ul>

    <!-- footer: ì´ë¯¸ì§€ URL ìˆìœ¼ë©´ ê·¸ê²ƒì„, ì—†ìœ¼ë©´ SVG í´ë°± -->
    <div class="footer-svg" th:if="${footerImageUrl}">
        <img th:src="${footerImageUrl}" alt="footer" width="600" height="180"
             style="display:block;border:0;width:100%;height:auto;"/>
    </div>
    <div class="footer-svg" th:if="${footerImageUrl == null}">
        <!-- SVG í´ë°±... (ìƒëµ) -->
    </div>
</div>
</body>
</html>
